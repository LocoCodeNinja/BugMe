<app-web-banner></app-web-banner>
<div class="mainPanelBody">
  <!-- <img src="assets/images/profileTeacher.png" alt="icon Png" /> -->
  <h1>Teacher Panel</h1>
  <p style="color: red; margin-left: 10%;" *ngFor="let error of errors">
    {{ error }}
  </p>
  <div class="button-container">
    <button
      mat-icon-button
      matTooltip="Create New User"
      (click)="createNewUser()"
    >
      <mat-icon>person_add</mat-icon>
    </button>
    <button
      mat-icon-button
      matTooltip="Generate Script"
      (click)="generateScript()"
    >
      <mat-icon>get_app</mat-icon>
    </button>
  </div>
  <div class="userSection">
    <mat-expansion-panel *ngFor="let user of users">
      <mat-expansion-panel-header class="panel-head">
        <!-- <ng-container *ngIf="user.role === 'User'; else notUser">
          <img src="assets/images/profileUser.png" alt="icon Png" />
        </ng-container>
        <ng-template #notUser>
          <ng-container *ngIf="user.role === 'Teacher'; else notTeacher">
            <img src="assets/images/profileTeacher.png" alt="icon Png" />
          </ng-container>
        </ng-template>
        <ng-template #notTeacher>
          <ng-container *ngIf="user.role === 'Employee'; else notEmployee">
            <img src="assets/images/profileEmployee.png" alt="icon Png" />
          </ng-container>
        </ng-template>
        <ng-template #notEmployee>
          <img src="assets/images/profileUser.png" alt="icon Png" />
        </ng-template> -->
        <div style="text-align: left;">
          <h2>{{ user.id }} : {{ user.role }}</h2>
        </div>
      </mat-expansion-panel-header>

      <ng-template #noPassword></ng-template>

      <mat-card-content>
        <div class="grid-item">Username: {{ user.username }}</div>
        <ng-container *ngIf="user.role !== 'Teacher'; else noPassword">
          <div class="grid-item">Password: {{ user.password }}</div>
        </ng-container>
        <div class="grid-container">
          <ng-container *ngFor="let bug of bugs">
            <mat-slide-toggle
              class="grid-item bug-toggle"
              [id]="bug.id"
              (change)="onToggleChange($event, user.id)"
              [checked]="getToggleValue(bug.id, user.id)"
              [title]="bug.title"
            >
              <div class="bug-severity">{{ bug.severity }}</div>
              <div class="bug-element">Bug: {{ bug.id }}</div>
              <!-- <div class="bug-element">{{ bug.title }}</div> -->
            </mat-slide-toggle>
          </ng-container>
        </div>
      </mat-card-content>
      <div
        class="delete-button"
        style="margin-left: auto;"
        *ngIf="user.id !== 1"
      >
        <button mat-icon-button (click)="deleteUser(user.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </mat-expansion-panel>
  </div>
</div>
